Лабораторная № 2 по технологиям компьютерных сетей
===================================================

Инструкция по использованию
---------------------------------------------------

### Сборка

Сборка происходит с использованием Gradle (встроен в репозиторий) и JDK 1.8+.

Для сборки выполните команду

    ./gradlew assemble
    
Данная команда соберёт все подпроекты. 

Чтобы подготовить дистрибутив программы, выполните команду:

    ./gradlew install

После этого программы будут расположены здесь по путям `subprojects/*/build/install/*`.

### NTP Сервер

Запуск сервера можно осуществить с помощью команды

    ./gradlew :lab2-ntp-server:run --args='[options]'

Опции:
- `-b, --bind <address[:port]>` адрес, на котором следует прослушивать входящие UDP пакеты (по умолчанию localhost:123)
- `-s, --stratum <level>` уровень сервера (1 -- первичный, 2-16 -- вторичные, по умолчанию 2)
- `-r, --reference <id>`  источник времени (код из четырёх или меньше ASCII символов)

Сервер отвечает на запросы клиента. Он не привязывается к состоянию клиента и ответ форс=мирует на основе запроса клиента. Сервер не поддерживает авторизацию и по этому должен без дополнительных настроек работать с клиентом.

### Клиент DNS

Клиент запускается командой

    ./gradlew :lab2-dns-client:run --args='[options] <arguments...>'

Опции:
- `-s, --server <server_name>` имя DNS сервера, который нужно спросить. По умолчанию будет принята попытка извлечь первый сервер из `/etc/resolv.conf`.
- `-c, --class <rclass>` имя или численный код класса записей, которые будут запрошены. Бессмысленная опция, по умолчанию IN.

Аргументы: вопросы к DNS серверу в следующем формате:

    [RECORD_TYPE:]NAME

Здесь RECORD_TYPE -- тип DNS записи (по умолчанию A). NAME -- имя DNS.

В результате работы программы в случае ответа от DNS сервера будет сформирован JSON объект в stdout. Объект содержит адрес сервера ("address"), данные пакета запроса ("request") и пакет ответа ("response").

Пример получения ipv4 адресов google.com:

```sh
./gradlew :lab2-dns-client:run -q --args='google.com' | \
    jq -r '.response.answers[] | select(.type = "A").data.address'
```

Поддерживаются следующие записи DNS: A, AAAA, CNAME, MX, NS, PTR, SOA, SRV, TXT.
