# Формат данных протокола

## Формат пакета

Каждое сообщение, передаваемое по сети представлено в виде пакетов разного типа и размера.

|Формат поля|Имя поля|Описание|
|---|---|---|
|[Unsigned LEB128]|size|Размер последующих данных, входящих в пакет|
|uint8|id|Индентификатор типа пакета|
|зависит от id|body|Тело пакета, формат тела определяется его типом|

## Использумые типы данных в теле пакета

|Имя типа|Описание|
|---|---|
|uint8|целое число от 0 до 255 в одном октете|
|uint32|целое число (4 овтета big endian) от 0 до 2^32-1|
|string|UTF-8 строка с префиксом формата [Unsigned LEB128], в котором содержится размер закодированной строки|
|[Unsigned LEB128]|Используется для того, чтобы закодировать длину каких-нибудь других данных, ограничен сверху до 2^32-1|

## Общие типы пакетов

Пакет **Error(id=0)** участвует во всех протоколах и обозначает ошибку. Пакет имеет всего одно поле в части *body* типа *string*, в котором хранится писание ошибки.

[Unsigned LEB128]: https://en.wikipedia.org/wiki/LEB128
